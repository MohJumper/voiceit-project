<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	>
<head>
<meta charset="UTF-8">
<title>Show all parties</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round|Open+Sans">
<!-- link for the style of the table and buttons 

https://www.tutorialrepublic.com/codelab.php?topic=bootstrap&file=table-with-add-and-delete-row-feature

<button type="button" class="btn btn-info add-new"><i class="fa fa-plus"></i> Add New Party</button>

	---------------------
	vote here 
	<a th:href="@{/vote/{id}(id=${party.id})}"
	        			class="edit vote" title="vote" data-toggle="tooltip">Vote Here</a>

	<input id="voted" type="submit" value="Vote Here" />
	
	 <button id="voted" th:onclick="checkIfClicked()" >Vote Here</button>
 -->
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

</head>
<body>
	<div class="col-sm-8"><h2><b>Voting Page</b></h2></div>
		<div class="col-sm-4">
	    
	     <a href="/newparty" class="btn btn-info add-new">Add New Party</a>
    </div>
	
	<table border="1" cellpadding="10" class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>Party Symbols</th>
				<th>Party Name</th>
				<th>Vote Here</th>
				<th>Action</th>
			</tr>
		</thead>
		
		<tbody>
			<tr th:each=" party : ${parties}">
				<td th:text="${party.id}">Party Symbols</td>
				<td th:text="${party.name}">Party Name</td>
				<td>
					
	        		<form th:action="@{/vote/{id}(id=${party.id})}" method="get">
		   					 
		   					 <button id="voted" th:disabled="${voted}">Vote Here</button>

		   					 
					</form>
				</td>
				<td>
					
        			<a th:href="@{/edit/{id}(id=${party.id})}"
        			
        			class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
        			 &nbsp;&nbsp;&nbsp;
        			 <a th:href="@{/delete/{id}(id=${party.id})}"
                    
                    class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
                    
				</td>
				<!-- 
				add to each a tage
				th:href="@{/edit/{id}(id=${part.id})}"
				
				<a th:href="@{/delete/{id}(id=${party.id})}"
                    
                    class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
				
				..................................
				 <a class="btn btn-default" >Edit</a>
                     &nbsp;&nbsp;&nbsp;
        			<a class="btn btn-default">Delete</a>
				
				 -->
				
			</tr>
		</tbody>
		
	</table >
	<script type="text/javascript" 
		
	>
	function setCookie(name, value, days) {
	    if (days) {
	        var date = new Date();
	        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
	        var expires = "; expires=" + date.toGMTString();
	    }
	    else var expires = "";
	    document.cookie = name + "=" + value + expires + "; path=/";
	}

	function getCookie(name) {
	    var nameEQ = name + "=";
	    var ca = document.cookie.split(';');
	    for (var i = 0; i < ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
	        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
	    }
	    return null;
	}

	$('#voted').click(function(){
	    $(this).attr('disabled',true);
	    setCookie('DisableBtn', true, null);
	});
	if(getCookie('DisableBtn'))
	    $('#clic').attr('disabled',true);

	</script>
</body>
</html>